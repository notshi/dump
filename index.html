<!DOCTYPE HTML>
<html id="top" lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">
		<meta name="theme-color" content="#142334">
		<title>_ d _ u _ m _ p _ </title>
		<!-- Copyright (c) 2022-present, shi Blank
		Licensed under the MIT license whose full text can be found at http://opensource.org/licenses/MIT -->
		<style>
			/*! minireset.css v0.0.3 | MIT License | github.com/jgthms/minireset.css */html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}img,embed,iframe,object,audio,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0;text-align:left}
			
			html		{scroll-behavior:smooth;}
			body, html	{-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; font-weight:normal; font-style:normal;}
			body		{background:#f2f2f2; font-family:sans-serif; font-size:1rem; line-height:1.5; color:#444;}
			body		{display:grid; height:100vh; grid-template-rows:auto 1fr auto;}
			h1		{font-size:4em; font-weight:normal; color:#1400ff;}
			h2		{font-size:2em; font-weight:normal;}
			h3		{font-size:1.3em; font-weight:bold;}
			a		{text-decoration:none;}
			p		{margin:0.5em 0;}
			img			{max-width:100%; height:auto;}
			.wrap		{background:#fff;}
			.head_wrap	{padding:2em 0; margin:0 auto;}
			.info_wrap	{padding:2em 0 0 7px;}
			.foot_wrap,
			.table_wrap	{max-width:1280px; width:960px; padding:2em 4em; margin:0 auto;}
			.table_wrap	{font-size:12px; line-height:1.5em;}
			
			#col_title,
			#col_date,
			#col_run,
			#col_time,
			#col_tix,
			#col_url	{display:inline-block; vertical-align:top;}
			
			a.url_tix,
			a.url_abt	{display:block; padding:3px 10px; font-size:12px; text-align:center; color:#fff; border-radius:4px;}
			a.url_tix	{background-color:#056b9c; font-weight:bold;}
			a.url_tix:hover	{background-color:#499fc9;}
			a.url_abt	{background-color:#747474;}
			a.url_abt:hover	{background-color:#969696;}
			
			.foot_wrap	{font-size:14px;}
			.foot_cont	{box-sizing:border-box; display:inline-block; padding-right:1em; width:100%; vertical-align:top;}
			.foot_small	{font-size:12px;}
			.foot_bold	{font-weight:bold;}
			.foot_bold p	{margin:1.5em 0;}
			span#date	{font-style:italic;}
			
			/*	Back to top link	*/
			a.top		{display:block; width:100%; padding:20px 0; text-align:center; font-size:12px; color:#444; cursor:pointer;}
			a.top:hover	{background-color:#F8F8F8;}
			
			/*	tablesort style	*/
			table		{background:#fff; max-width:100%; border-spacing:0; width:100%; margin:10px 0; border:1px solid #ddd; border-collapse:separate;
			*border-collapse:collapsed; -webkit-box-shadow:0 0 4px rgba(0,0,0,0.10); -moz-box-shadow:0 0 4px rgba(0,0,0,0.10); box-shadow:0 0 4px rgba(0,0,0,0.10);}
			table th,
			table td	{padding:6px; line-height:18px; text-align:left; border-top:1px solid #ddd;}
			table th	{background:#eee; background:-webkit-gradient(linear, left top, left bottom, from(#f6f6f6), to(#eee)); background:-moz-linear-gradient(top, #f6f6f6, #eee); text-shadow:0 1px 0 #fff; font-weight:bold; vertical-align:bottom;}
			table td	{vertical-align:middle;}
			table thead:first-child tr th,
			table thead:first-child tr td			{border-top:0;}
			table tbody + tbody				{border-top:2px solid #ddd;}
			table th + th,
			table td + td,
			table th + td,
			table td + th					{border-left:1px solid #ddd;}
			table thead:first-child tr:first-child th,
			table tbody:first-child tr:first-child th,
			table tbody:first-child tr:first-child td	{border-top:0;}
			table td:first-child				{font-size:14px;}

			th[role=columnheader]:not(.no-sort)		{cursor:pointer;}
			th[role=columnheader]:not(.no-sort):after	{content:''; float:right; margin-top:7px; border-width:0 4px 4px; border-style:solid; border-color:#404040 transparent; visibility:hidden; opacity:0; -ms-user-select:none; -webkit-user-select:none; -moz-user-select:none; user-select:none;}
			th[aria-sort=ascending]:not(.no-sort):after	{border-bottom:none; border-width:4px 4px 0;}
			th[aria-sort]:not(.no-sort):after		{visibility:visible; opacity:0.4;}
			th[role=columnheader]:not(.no-sort):hover:after	{visibility:visible; opacity:1;}

			
			/*	PHONES & STUFF
				============================================= */
				
			@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
			only screen and (-o-min-device-pixel-ratio: 3/2),
			only screen and (min--moz-device-pixel-ratio: 1.5),
			only screen and (min-device-pixel-ratio: 1.5) {

			.head_wrap	{padding:1em; margin:0 auto; line-height:2em;}
			.foot_wrap	{padding:2em; font-size:12px;}
			.table_wrap	{padding:1vh; max-width:initial;}
			span#date	{display:block; padding-top:1em;}

			}
		</style>
	</head>
	<body><div id="test"></div>
		<div class="table_wrap">
			<div class="head_wrap"><h2>Movie dump @ The Light Cinema</h2></div>
			<table id="table">
				<thead>
				<tr>
					<th>Title</th>
					<th>Length</th>
					<th>Date</th>
					<th>Time</th>
					<th data-sort-method='none' class="no-sort">Tickets</th>
					<th data-sort-method='none' class="no-sort">About</th>
				</tr>
				</thead>
				<tbody id="dump"></tbody>
			</table>
		</div>
		<div class="wrap">
			<div class="foot_wrap">
				<div class="foot_cont">
					<div class="foot_bold"><p>About</p></div>
					<div class="foot_text">
						Live movie showings at The Light Cinema Bradford in a sortable list.
					</div>
					<div class="foot_bold"><p><a href="http://github.com/notshi/dump">dump is on Github</a></p></div>
					<div class="foot_small">Project by Wetgenes, 2022-present</div>
				</div>
			</div>
			<a href="#top" class="top">BACK TOP</a>
		</div>
	</body>
	<script>
		window.gfdx = function(a)
		{
			var dat=window.__gfminiguidedata;
			//	console.log(dat)
			//	document.getElementById("dump").innerHTML="<pre>"+JSON.stringify(dat)+"</pre>"
			const table = document.getElementById("dump");			
			for (let it of dat.Schedule)
			{
				//console.log(it.Title)
				for (let d of it.Dates)
				{
					//console.log(d)
					for (let f of d.Formats)
					{
						//console.log(f)
						for (let s of f.Sessions)
						{
							//console.log(s)
							
							const tr = document.createElement("tr");
							table.appendChild(tr);
							
							const title = document.createElement("td");
							title.className = 'title';
							title.innerHTML+=it.Title
							tr.appendChild(title);
							
							const run = document.createElement("td");
							run.className = 'run';
							let aa = it.Runtime.split(" ");
							aa[0] = parseInt(aa[0]);
							aa[1] = parseInt(aa[1]);
							let runtime = aa[0]*60 + aa[1];
							let ab = document.createAttribute("data-sort");
							ab.value = runtime.toString().padStart(4,"0");
							run.setAttributeNode(ab);
							run.innerHTML+=it.Runtime
							tr.appendChild(run);
							
							const date = document.createElement("td");
							date.className = 'date';
							let key = document.createAttribute("data-sort");
							key.value = d.Key;
							date.setAttributeNode(key);
							date.innerHTML+=d.Display
							tr.appendChild(date);
							
							const time = document.createElement("td");
							time.className = 'time';
							time.innerHTML+=s.Display
							tr.appendChild(time);
							
							const tix = document.createElement("td");
							tix.className = 'tix';
							tix.innerHTML+="<a class='url_tix' href='"+s.Url+"' target='_blank'>BUY</a>"
							tr.appendChild(tix);
							
							const url = document.createElement("td");
							url.className = 'url';
							url.innerHTML+="<a class='url_abt' href='https://bradford.lightcinemas.co.uk/"+it.Url+"' target='_blank'>ABOUT</a>"
							tr.appendChild(url);
						}
					}
				}
			}
		}
	</script>
	<script src="https://bradford.lightcinemas.co.uk/resource/services/miniguide/data.ashx"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js" type="text/javascript"></script>
	<script>new Tablesort(document.getElementById("table"));</script>
</html>
